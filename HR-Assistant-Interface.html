<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Simple Chat Interface</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 30px;
      background-color: #f4f4f4;
    }

    #chat-box {
      max-width: 600px;
      margin: 0 auto;
      background: white;
      border: 1px solid #ccc;
      padding: 20px;
      border-radius: 6px;
    }

    .message {
      margin-bottom: 10px;
    }

    .user {
      color: #1a73e8;
      font-weight: bold;
    }

    .bot {
      color: #111;
      font-weight: normal;
    }

    #input-area {
      display: flex;
      margin-top: 20px;
    }

    #prompt {
      flex: 1;
      padding: 10px;
      font-size: 1em;
    }

    #send {
      padding: 10px 20px;
      font-size: 1em;
      margin-left: 10px;
      cursor: pointer;
    }
.disclaimer {
    color: red;
    //font-weight: bold;
    padding: 10px;
font-size: 0.85em;
    margin-top: 10px;
    border: 1px solid red;
    background-color: #ffe6e6;
    border-radius: 6px;
    line-height: 1.4em;
margin-bottom:6px;
  }
  </style>
</head>
<body>

  <h1>Ask Affirma HR</h1>
  <div id="chat-box">
    <div id="messages">
	<div class="disclaimer">
    	   <strong>Disclaimer:</strong><br>
    		This response is based solely on information extracted from the companyâ€™s official HR documentation and is intended only for full-time employees located in the United States.
    	<br><br>
    	   HR policies and benefits may vary depending on your employment status (e.g., part-time, contractor, intern), work location (including international or remote roles), department, or other individual agreements.
    <br><br>
    This information is not intended to serve as legal, contractual, or benefits advice. If you have questions about how a policy applies to your specific situation or if no relevant information was found, please reach out directly to your HR representative, manager, or the People Operations team for clarification.
  </div>
    </div>

    <div id="input-area">
      <input type="text" id="prompt" placeholder="Type your message..." />
      <button id="send">Send</button>
    </div>
  </div>

  <script>
    const promptInput = document.getElementById('prompt');
    const sendButton = document.getElementById('send');
    const messagesDiv = document.getElementById('messages');

    async function sendPrompt() {
      const prompt = promptInput.value.trim();
      if (!prompt) return;

      // Display user's message
      const userMsg = document.createElement('div');
      userMsg.className = 'message user';
      userMsg.textContent = `You: ${prompt}`;
      messagesDiv.appendChild(userMsg);

      // Clear input
      promptInput.value = '';
      // â³ Add "Thinking..." message
const thinkingMsg = document.createElement('div');
thinkingMsg.className = 'message bot thinking';
thinkingMsg.textContent = 'ðŸ¤” Thinking...';
messagesDiv.appendChild(thinkingMsg);
	
      // Simulate an HTTP call (replace this URL with your actual endpoint)
      try {
        const response = await fetch('https://prod-133.westus.logic.azure.com:443/workflows/a7ac9a60e5194e6faf4d878b40286932/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=D-2HxdfoEYydFc02wF6hTQoRK1Eyexh2lUKdQJw1RzE', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          //body: JSON.stringify({ prompt })
  	  body: JSON.stringify({
    userMessage: prompt
  })
        });

        const data = await response.json();
	 messagesDiv.removeChild(thinkingMsg);
        const botMsg = document.createElement('div');
        botMsg.className = 'message bot';
	botMsg.innerHTML = botMsg.innerHTML + convertTextToHTML(`${data.answer || 'No response available'}`);
        messagesDiv.appendChild(botMsg);
      } catch (error) {
        const errorMsg = document.createElement('div');
        errorMsg.className = 'message bot';
        errorMsg.textContent = 'Bot: Error fetching response.';
        messagesDiv.appendChild(errorMsg);
      }

      // Auto-scroll
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }

    sendButton.addEventListener('click', sendPrompt);

    promptInput.addEventListener('keypress', function (e) {
      if (e.key === 'Enter') {
        sendPrompt();
      }
    });

function convertTextToHTML(text) {
  return text
    .split('\n\n') // Paragraphs
    .map(paragraph =>
      '<p>' + paragraph.replace(/\n/g, '<br>') + '</p>'
    )
    .join('');
}
  </script>
</body>
</html>